<!-- Sección interna #contratame con formulario listo para Formspree
     Incluye: layout responsive en columnas, estilos modernos, validación básica,
     envío via fetch (sin salir de la página), mensajes de éxito/error y honeypot anti‑spam. -->

<section id="contratame" class="contact-wrap">
  <div class="container">
    <header class="head">
      <h2>Contrátame</h2>
      <p>Completá este formulario para contarme sobre tu proyecto y preparar una propuesta a medida.</p>
    </header>

    <form id="contratameForm" action="https://formspree.io/f/mblzjnep" method="POST" novalidate>
      <!-- Ajustes especiales para Formspree -->
      <input type="hidden" name="_subject" value="Nuevo proyecto desde el portfolio">
      <input type="text" name="_gotcha" autocomplete="off" tabindex="-1" class="hp"> <!-- honeypot -->

      <fieldset>
        <legend>1) Datos de la empresa</legend>
        <div class="grid">
          <label>Nombre comercial
            <input type="text" name="nombre_comercial" required>
          </label>
          <label>Rubro
            <input type="text" name="rubro" required>
          </label>
          <label>Dirección
            <input type="text" name="direccion">
          </label>
          <label>Teléfono / WhatsApp
            <input type="text" name="telefono">
          </label>
          <label class="col-2">Redes sociales (links)
            <input type="text" name="redes_sociales" placeholder="Instagram, Facebook, TikTok, etc.">
          </label>
        </div>
      </fieldset>

      <fieldset>
        <legend>2) Objetivos del sitio (puede elegir varios)</legend>
        <div class="chips">
          <label><input type="checkbox" name="objetivo" value="Informar"><span>Mostrar información</span></label>
          <label><input type="checkbox" name="objetivo" value="Vender"><span>Vender online</span></label>
          <label><input type="checkbox" name="objetivo" value="Catalogo"><span>Catálogo</span></label>
          <label><input type="checkbox" name="objetivo" value="Captar"><span>Captar clientes</span></label>
          <label><input type="checkbox" name="objetivo" value="Consultas"><span>Recibir consultas</span></label>
          <label><input type="checkbox" name="objetivo" value="Ubicacion"><span>Ubicación y horarios</span></label>
          <label><input type="checkbox" name="objetivo" value="Blog"><span>Blog / Novedades</span></label>
          <label><input type="checkbox" name="objetivo" value="Reservas"><span>Reservas / turnos</span></label>
          <label><input type="checkbox" name="objetivo" value="SEO"><span>SEO en Google</span></label>
        </div>
      </fieldset>

      <fieldset>
        <legend>3) Contenidos</legend>
        <div class="grid">
          <label class="col-2">Textos (qué tienen listo y qué faltaría)
            <textarea name="textos" rows="3" placeholder="Quiénes somos, descripciones, políticas de envíos, etc."></textarea>
          </label>
          <label>¿Tienen fotos y videos propios?
            <select name="fotos_videos">
              <option value="Si">Sí</option>
              <option value="Parcial">Parcial</option>
              <option value="No">No</option>
            </select>
          </label>
          <label>¿Tienen logo y colores definidos?
            <select name="branding">
              <option value="Si">Sí</option>
              <option value="Parcial">Parcial</option>
              <option value="No">No</option>
            </select>
          </label>
        </div>
      </fieldset>

      <fieldset>
        <legend>4) Funcionalidades</legend>
        <div class="chips">
          <label><input type="checkbox" name="funcionalidad" value="WhatsApp"><span>Botón WhatsApp</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Carrito"><span>Carrito</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Envios"><span>Calculadora de envíos</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Mapa"><span>Mapa</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Estadisticas"><span>Estadísticas (GA4)</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Blog"><span>Blog</span></label>
          <label><input type="checkbox" name="funcionalidad" value="Reservas"><span>Reservas</span></label>
        </div>
        <label class="col-2">Otras funcionalidades
          <input type="text" name="funcionalidad_otras" placeholder="Mercado Pago, puntos de retiro, etc.">
        </label>
      </fieldset>

      <fieldset>
        <legend>5) Referencias</legend>
        <label class="col-2">Sitios que te gusten (links y qué te gusta de cada uno)
          <textarea name="referencias" rows="3" placeholder="https://ejemplo.com – me gusta el menú; https://otro.com – me gusta el estilo de fotos"></textarea>
        </label>
      </fieldset>

      <fieldset>
        <legend>6) Presupuesto y plazos</legend>
        <div class="grid">
          <label>Presupuesto estimado
            <input type="text" name="presupuesto" placeholder="$60.000 – $130.000 (o indicar rango)">
          </label>
          <label>Fecha objetivo de lanzamiento
            <input type="date" name="fecha_limite">
          </label>
        </div>
      </fieldset>

      <fieldset>
        <legend>7) Datos técnicos</legend>
        <div class="grid">
          <label>¿Tienen dominio y hosting?
            <select name="dominio_hosting">
              <option value="Si">Sí</option>
              <option value="No">No</option>
              <option value="En proceso">En proceso</option>
            </select>
          </label>
          <label>¿Quieren que yo lo gestione?
            <select name="gestionar_dominio_hosting">
              <option value="Si">Sí</option>
              <option value="No">No</option>
            </select>
          </label>
        </div>
      </fieldset>

      <fieldset>
        <legend>8) Mantenimiento</legend>
        <div class="chips">
          <label><input type="radio" name="mantenimiento" value="Desarrollador" required><span>Lo gestiona el desarrollador</span></label>
          <label><input type="radio" name="mantenimiento" value="Cliente"><span>Autogestionar contenidos</span></label>
        </div>
      </fieldset>

      <fieldset>
        <legend>9) Contacto</legend>
        <div class="grid">
          <label>Nombre
            <input type="text" name="nombre" required>
          </label>
          <label>Email
            <input type="email" name="email" required>
          </label>
          <label class="col-2">Mensaje / detalles adicionales
            <textarea name="mensaje" rows="4"></textarea>
          </label>
        </div>
      </fieldset>

      <div class="actions">
        <button type="submit" class="btn primary">Enviar formulario</button>
        <p class="form-note">Al enviar aceptás ser contactadx por el correo que indiques. No comparto tus datos con terceros.</p>
      </div>

      <div id="formStatus" class="status" aria-live="polite"></div>
    </form>
  </div>
</section>

<style>
  :root{--bg:#0b0b0c;--card:#121216;--text:#e9e9ee;--muted:#a9a9b2;--brand:#7c5cff;--brand-2:#5ee1a9;--stroke:#23232a;--error:#ff5c82;--ok:#3ad29f}
  .contact-wrap{background:linear-gradient(180deg,var(--bg),#0e0e12 60%,#0b0b0c);padding:72px 16px}
  .container{max-width:1040px;margin:0 auto;background:var(--card);border:1px solid var(--stroke);border-radius:20px;padding:32px;box-shadow:0 10px 40px rgba(0,0,0,.35)}
  .head h2{font-size:clamp(28px,4vw,40px);color:var(--text);margin:0 0 6px}
  .head p{color:var(--muted);margin:0 0 24px}
  form{display:block}
  fieldset{border:1px solid var(--stroke);border-radius:16px;padding:20px;margin:18px 0;background:rgba(255,255,255,.02)}
  legend{padding:0 10px;color:var(--text);font-weight:600}
  label{display:flex;flex-direction:column;gap:8px;color:var(--text);font-size:14px}
  input[type=text],input[type=email],input[type=date],textarea,select{background:#0e0e13;border:1px solid var(--stroke);color:var(--text);padding:12px 14px;border-radius:12px;outline:none;transition:border .2s, box-shadow .2s}
  input:focus,textarea:focus,select:focus{border-color:var(--brand);box-shadow:0 0 0 3px rgba(124,92,255,.2)}
  textarea{resize:vertical}
  .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
  .grid > label{grid-column:span 6}
  .grid > label.col-2{grid-column:span 12}
  @media (max-width:800px){.grid > label{grid-column:span 12}}

  .chips{display:flex;flex-wrap:wrap;gap:10px}
  .chips label{flex-direction:row;align-items:center;gap:8px}
  .chips input{display:none}
  .chips span{display:inline-block;padding:10px 14px;border:1px solid var(--stroke);border-radius:999px;cursor:pointer;color:var(--muted);user-select:none;background:#0e0e13;transition:all .2s}
  .chips input:checked + span{border-color:var(--brand);color:var(--text);box-shadow:0 0 0 3px rgba(124,92,255,.18)}

  .actions{display:flex;align-items:center;gap:16px;margin-top:18px;flex-wrap:wrap}
  .btn{appearance:none;border:0;border-radius:12px;padding:12px 18px;cursor:pointer;font-weight:600}
  .btn.primary{background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#0b0b0c}
  .btn[disabled]{opacity:.6;cursor:not-allowed}
  .form-note{color:var(--muted);font-size:12px;margin:0}

  .status{margin-top:12px;font-weight:600}
  .status.ok{color:var(--ok)}
  .status.err{color:var(--error)}

  .hp{position:absolute;left:-10000px;opacity:0}
</style>

<script>
  (function(){
    const form = document.getElementById('contratameForm');
    const status = document.getElementById('formStatus');

    function serialize(form){
      const data = new FormData(form);
      // Combinar múltiples checkboxes con el mismo name en línea separada por comas
      const combine = name => Array.from(form.querySelectorAll(`[name="${name}"]`))
        .filter(el=> (el.type==='checkbox' || el.type==='radio') ? el.checked : true)
        .map(el=> el.value);
      const objetivos = combine('objetivo').join(', ');
      const funcionalidades = combine('funcionalidad').join(', ');
      if(objetivos) data.append('objetivos_seleccionados', objetivos);
      if(funcionalidades) data.append('funcionalidades_seleccionadas', funcionalidades);
      return data;
    }

    form.addEventListener('submit', async (e)=>{
      e.preventDefault();
      status.textContent = '';
      status.className = 'status';

      // Validación simple
      const required = form.querySelectorAll('[required]');
      let ok = true;
      required.forEach(i=>{ if(!i.value.trim()){ ok=false; i.classList.add('invalid'); i.addEventListener('input',()=>i.classList.remove('invalid'),{once:true}); } });
      if(!ok){
        status.textContent = 'Revisá los campos obligatorios.';
        status.classList.add('err');
        return;
      }

      const btn = form.querySelector('button[type="submit"]');
      btn.disabled = true;
      btn.textContent = 'Enviando…';

      try{
        const res = await fetch(form.action, {
          method: 'POST',
          body: serialize(form),
          headers: { 'Accept': 'application/json' }
        });
        if(res.ok){
          form.reset();
          status.textContent = '¡Gracias! Recibí tu información y te responderé a la brevedad.';
          status.classList.add('ok');
        } else {
          status.textContent = 'Hubo un problema al enviar. Intentá nuevamente o escribime por WhatsApp.';
          status.classList.add('err');
        }
      } catch(err){
        status.textContent = 'Error de conexión. Verificá tu internet e intentá de nuevo.';
        status.classList.add('err');
      } finally {
        btn.disabled = false;
        btn.textContent = 'Enviar formulario';
      }
    });
  })();
</script>